(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),i=a.n(c),l=(a(84),a(10)),u=a(11),s=a(15),o=a(13),d=a(14),h=a(142),m=a(144),p=a(16),f=a(22),v=a(9),b=a(6),E=a.n(b),k=a(7),g=a(62),_=a(76),y=a(63),w=a.n(y).a.create({withCredentials:!0,headers:{Accept:"application/json"}}),j=function(e){try{var t=(new Error).stack.split("\n")[2].trim().split(" ")[1];console.error("Error in API.".concat(t,": ").concat(e))}catch(a){console.error("An unexpected error occured in API.\n",e)}},O=new(function(){function e(){Object(l.a)(this,e),this.base_url="/",this.auth_url="/auth/callback",this.auth_check_url="/auth/check",this.authenticated=!1,this.auth_callbacks=[],this.user=null}return Object(u.a)(e,[{key:"authenticate",value:function(e){var t=this,a={auth_token:e};this.get(this.auth_url,{params:a}).then((function(e){200===e.status?t.auth_callback(e.data):console.error(e.data)}))}},{key:"check_auth",value:function(){var e=this;this.get(this.auth_check_url).then((function(t){200===t.status&&!1!==t.data.authenticated&&e.auth_callback(t.data)})).catch(j)}},{key:"add_auth_listener",value:function(e){this.authenticated?e(this.user):this.auth_callbacks.push(e)}},{key:"auth_callback",value:function(e){this.user=e,this.authenticated=!0,this.auth_callbacks.forEach((function(t){t(e)}))}},{key:"get",value:function(){var e=Object(k.a)(E.a.mark((function e(t){var a,n=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,w.get(t,a).catch(j);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(k.a)(E.a.mark((function e(t,a){var n,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:{},n=Object.assign({headers:{"Content-Type":"application/json"}},n),e.next=4,w.post(t,a,n).catch(j);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(k.a)(E.a.mark((function e(t,a){var n,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:{},n=Object.assign({headers:{"Content-Type":"application/json"}},n),e.next=4,w.put(t,a,n).catch(j);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(k.a)(E.a.mark((function e(t){var a,n=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,w.delete(t,a).catch(j);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pager",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(_.a)(E.a.mark((function r(){var c,i;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c={params:{page:a,limit:n}},r.next=4,Object(g.a)(t.get(e,c));case 4:if(i=r.sent,a++,200==i.status){r.next=9;break}return j(i.data),r.abrupt("return",[]);case 9:if(!(i.data.length<n)){r.next=11;break}return r.abrupt("return",i.data);case 11:return r.next=13,i.data;case 13:r.next=0;break;case 15:case"end":return r.stop()}}),r)})))()}},{key:"get_user",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/auth/user");case 2:if(!("error"in(t=e.sent))&&200===t.status){e.next=5;break}return e.abrupt("return",void 0);case 5:this.authenticated||this.authenticate(t.data.user);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submit_file",value:function(){var e=Object(k.a)(E.a.mark((function e(t,a,n){var r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"multipart/form-data"}},(c=new FormData).append("uploader",t),c.append("title",a),c.append("file",n),e.next=7,this.post("/uploads",c,r).catch(j);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"update_file",value:function(){var e=Object(k.a)(E.a.mark((function e(t,a,n){var r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/uploads/"+t,c={uploader:a,title:n},e.next=4,this.put(r,c).catch(j);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"sign_out",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.authenticated){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",this.get("/auth/signout").then((function(e){return 200==e.status&&(t.authenticated=!1,t.user=null,!0)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete_upload",value:function(){var e=Object(k.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/uploads/"+t,e.next=3,this.delete(a);case 3:if(200==(n=e.sent).status){e.next=7;break}return j(n.data),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),x=a(126),N=a(127),S=a(128),C=a(66),I=a(36),D=a.n(I),q=a(64),F=a(65),L=a(46),T=a(141),U=a(125),M=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={file:null},e.form=r.a.createRef(),e.onFormSubmit=e.onFormSubmit.bind(Object(s.a)(e)),e.onChange=e.onChange.bind(Object(s.a)(e)),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){O.add_auth_listener((function(e){document.getElementById("uploader").value=e.name}))}},{key:"onChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"onFormSubmit",value:function(){var e=Object(k.a)(E.a.mark((function e(t){var a,n,r,c,i,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=["uploader","title"].map((function(e){return document.getElementById(e).value})),n=Object(L.a)(a,2),r=n[0],c=n[1],i=this.state.file,e.next=5,O.submit_file(r,c,i);case 5:201==(l=e.sent).status&&this.props.on_file_upload&&this.props.on_file_upload(l.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(T.a,{className:"shadow-lg",ref:this.form,onSubmit:this.onFormSubmit},r.a.createElement("h2",null,"Upload New File"),r.a.createElement(T.a.Group,{controlId:"uploader"},r.a.createElement(T.a.Label,{className:"required"},"Your Name"),r.a.createElement(T.a.Control,{type:"text",name:"uploader",required:!0})),r.a.createElement(T.a.Group,{controlId:"title"},r.a.createElement(T.a.Label,{className:"required"},"Upload Title"),r.a.createElement(T.a.Control,{type:"text",name:"title",required:!0,placeholder:"Something creative ;)"})),r.a.createElement(T.a.Group,{controlId:"file"},r.a.createElement(T.a.Label,{className:"required"},"Upload your file!"),r.a.createElement(T.a.Control,{type:"file",name:"file",required:!0,className:"file-upload",onChange:this.onChange})),r.a.createElement(U.a,{variant:"primary",type:"submit"},"Submit"))}}]),a}(r.a.Component),B=function(e){console.error(e)},P=function(e){var t=e.accessToken;O.authenticate(t)},A=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={title_anim:!1,anim_state:0,authenticated:O.authenticated},e.quote_ref=r.a.createRef(),e.title_block=r.a.createElement("h1",{id:"title-string"},"Drive++ ",r.a.createElement("em",null,"with ",r.a.createElement("strong",null,"React"))),e.quote_block=r.a.createElement("blockquote",{className:"blockquote text-muted",ref:e.quote_ref},r.a.createElement("h3",null,r.a.createElement("i",null,"Possibly the most attractive landing page I've ever created.")),r.a.createElement("footer",{className:"blockquote-footer"},"Bryce Corbitt")),e.login_button=r.a.createElement(F.GoogleLogin,{clientId:"772498714969-serroucg6ud4ns0038efpc5gdsefgm8d.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:P,onFailure:B,cookiePolicy:"single_host_origin"}),e.on_file_upload=e.on_file_upload.bind(Object(s.a)(e)),e}return Object(u.a)(a,[{key:"on_file_upload",value:function(e){var t=this;"/user"in this.props.states||(this.props.states["/user"]={}),this.props.states["/user"].selected=e,setTimeout((function(){t.setState({redirect:!0})}),0)}},{key:"title_animation",value:function(){var e=this,t=new q.a("#title-string",{speed:100,startDelay:500,afterComplete:function(){t.reset(),e.setState({title_anim:!0,anim_state:1,redirect:!1})}});t.type("Glitch Drive",{delay:400}).move(-5,{speed:125}).delete(7,{speed:125}).move("END",{delay:100}).type("++",{delay:800}).delete(1).type("=2",{delay:100}).type("?",{delay:400}).delete(3).type("+",{delay:300}).type(" <em>with </em>").type("<em><strong>React</strong></em>",{speed:200,delay:500}).go()}},{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.add_auth_listener((function(){a.setState({authenticated:!0})})),void 0===(t=this.props.states[this.props.location.pathname])){e.next=5;break}return e.next=5,this.setState(t);case 5:this.state.title_anim||this.title_animation();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props.location.pathname;this.props.states[e]=this.state,Object.assign(this.props.states[e],{title_anim:!0,anim_state:2,redirect:!1})}},{key:"render",value:function(){var e,t=r.a.createElement("h1",{id:"title-string"}),a=null,n=null,c=r.a.createElement(D.a,null,r.a.createElement(M,{on_file_upload:this.on_file_upload}));switch(this.state.authenticated||(a=this.login_button,c=null),!0===this.state.redirect&&(n=r.a.createElement(v.a,{from:"/",to:"/user"})),this.state.anim_state){case 0:e=r.a.createElement("div",{className:"hidden-but-still-take-up-space"},this.quote_block);break;case 1:e=r.a.createElement(D.a,{transitionDuration:1e3},this.quote_block),t=this.title_block;break;default:e=this.quote_block,t=this.title_block}return r.a.createElement("div",null,r.a.createElement(x.a,{fluid:!0},t,e),r.a.createElement(N.a,{fluid:!0},r.a.createElement(S.a,{className:"justify-content-md-center"},r.a.createElement(C.a,{id:"login-button",className:"text-center"},a)),r.a.createElement(S.a,{className:"justify-content-md-center"},r.a.createElement(C.a,{id:"upload-form"},c)),n))}}]),a}(r.a.Component),R=Object(v.g)(A),G=a(138),H=a(67),W=a.n(H),z=a(140),J=a(135),K=a(143),V=a(137),Y=a(129),$=a(130),Q=a(131),X=a(132),Z=a(133),ee=a(134),te=a(136),ae=a(139);function ne(e){var t=Object(n.useState)(!1),a=Object(L.a)(t,2),c=a[0],i=a[1],l=e.id,u=e.name,s=e.title,o=e.delete_callback,d=function(){return i(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{width:"32",height:"32",onClick:function(){return i(!0)},className:"delete-btn"}),r.a.createElement(z.a,{show:c,onHide:d},r.a.createElement(z.a.Header,{closeButton:!0},r.a.createElement(z.a.Title,null,"Upload Deletion: ",r.a.createElement("strong",null,s))),r.a.createElement(z.a.Body,null,"Are you sure you want to delete ",u,"?"),r.a.createElement(z.a.Footer,null,r.a.createElement(U.a,{variant:"secondary",onClick:d},"No"),r.a.createElement(U.a,{variant:"danger",onClick:function(){i(!1),O.delete_upload(l).then((function(e){1==e&&void 0!=o&&o()}))}},"Yes"))))}var re=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).data=e.data,n.data.created_at=new Date(Date.parse(e.data.created_at)).toLocaleString(),n.data.updated_at=new Date(Date.parse(e.data.updated_at)).toLocaleString(),n.state={editable:!1,editing:!1,deleted:!1,table_shown:!1,data:n.data,title:n.data.title,uploader:n.data.uploader},n.delete=n.delete.bind(Object(s.a)(n)),n.edit=n.edit.bind(Object(s.a)(n)),n.titleInput=r.a.createElement("input",{type:"text",className:"title-input",defaultValue:n.state.title,onChange:function(e){n.setState({title:e.target.value})}}),n.uploaderInput=r.a.createElement("input",{type:"text",className:"uploader-input",defaultValue:n.state.uploader,onChange:function(e){n.setState({uploader:e.target.value})}}),n}return Object(u.a)(a,[{key:"delete",value:function(){this.setState({deleted:!0})}},{key:"edit",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.title,a=this.state.uploader,n=this.data.id,e.next=5,O.update_file(n,a,t);case 5:return(r=e.sent).data.created_at=new Date(Date.parse(r.data.created_at)).toLocaleString(),r.data.updated_at=new Date(Date.parse(r.data.updated_at)).toLocaleString(),e.next=10,this.setState({data:r.data,editing:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;O.add_auth_listener((function(t){t._id==e.state.data.uploader_id&&e.setState({editable:!0})}))}},{key:"render",value:function(){var e=this,t=this.state;if(1==this.state.deleted)return null;var a=this.state.data,n=a.download_path,c=a.title,i=a.uploader,l=a.mime_type,u=a.file_name;n=O.base_url+n;var s={title:"Post Title",uploader:"Uploader Name",id:"Id",file_name:"File Name",mime_type:"Mimetype",size_formatted:"Size",created_at:"Upload Timestamp"},o={},d=r.a.createElement("p",null,r.a.createElement($.a,null)," Display attributes"),h=[];Object.keys(s).forEach((function(e){o[e]=t.data[e],h.push(r.a.createElement("tr",{key:e},r.a.createElement("td",null,r.a.createElement("strong",null,s[e])),r.a.createElement("td",null,o[e])))})),this.state.table_shown&&(d=r.a.createElement("p",null,r.a.createElement(Q.a,null)," Hide attributes"));var m=null,p=null,f=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,c),r.a.createElement("p",{className:"uploader-name"},i));this.state.editable&&(m=r.a.createElement(C.a,null,r.a.createElement(ne,{id:o.id,name:o.file_name,title:c,delete_callback:this.delete})),p=r.a.createElement("div",{as:U.a},r.a.createElement(X.a,{cursor:"pointer",className:"text-success",width:"32",height:"32",onClick:function(){e.setState({editing:!0})}})),this.state.editing&&(f=r.a.createElement(r.a.Fragment,null,this.titleInput,r.a.createElement("p",null,"Uploader: ",this.uploaderInput)),p=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{as:U.a},r.a.createElement(Z.a,{cursor:"pointer",className:"text-danger",width:"32",height:"32",onClick:function(){e.setState({editing:!1})}})),r.a.createElement("div",{as:U.a},r.a.createElement(ee.a,{cursor:"pointer",className:"text-success",width:"32",height:"32",onClick:this.edit})))));var v=null;switch(l.substring(0,l.indexOf("/"))){case"audio":v=r.a.createElement("audio",{controls:!0,className:"audio-preview",src:n});break;case"video":v=r.a.createElement("video",{controls:!0,className:"video-preview",src:n});break;case"image":v=r.a.createElement(J.a,{className:"image-preview img-fluid",src:n});break;default:v=r.a.createElement(J.a,{className:"image-preview img-fluid",src:"/file_icon.png"})}return r.a.createElement(D.a,null,r.a.createElement(ae.a,{borderRadius:"10px",border:1,className:"shadow"},r.a.createElement(N.a,{className:"panel"},r.a.createElement(S.a,{className:".row-centered"},r.a.createElement(C.a,{className:"panel-header"},r.a.createElement(S.a,null,r.a.createElement(C.a,{className:"col"},r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("div",{className:"p-2 mr-2"},f),r.a.createElement("div",{className:"p-2 edit-controls"},p))),r.a.createElement(C.a,{xs:"auto",className:"float-right"},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement("a",{download:u,href:n},r.a.createElement(te.a,{width:"32",height:"32"}))),m))))),r.a.createElement(S.a,null,r.a.createElement(C.a,{className:"panel-display text-center"},v)),r.a.createElement(S.a,null,r.a.createElement(C.a,{className:"panel-footer"},r.a.createElement(K.a,null,r.a.createElement(K.a.Toggle,{as:U.a,variant:"link",eventKey:"0",onClick:function(){e.setState({table_shown:!e.state.table_shown})}},d),r.a.createElement(K.a.Collapse,{eventKey:"0"},r.a.createElement(V.a,null,r.a.createElement("tbody",null,h)))))))))}}]),a}(r.a.Component),ce=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var r=void 0==e.auth_required||e.auth_required;return n.state={auth_required:r,authenticated:!1,items:[],has_more:!0,is_loading:!0},n.feed_path=e.feed_path,n.generator=O.pager(e.feed_path),n.renderItems=n.renderItems.bind(Object(s.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.add_auth_listener(Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({authenticated:!0});case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"page",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.generator.next();case 2:t=e.sent,a=this.state.items.concat(t.value),this.setState({items:a,has_more:!t.done});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderItem",value:function(e,t){return t?r.a.createElement("div",{key:e},r.a.createElement(re,{data:t})):null}},{key:"renderItems",value:function(){if(!this.state.items||this.state.items===[])return null;for(var e=this.state.items,t=[],a=0;a<e.length;a++)t.push(this.renderItem(a,e[a]));return t}},{key:"render",value:function(){var e=this,t=null,a=null;return!this.state.authenticated&&this.state.auth_required||(a=this.renderItems(),t=r.a.createElement("div",{id:"feed",style:{height:"100%",overflow:"auto"},ref:function(t){return e.scrollParentRef=t}},r.a.createElement(W.a,{pageStart:1,loadMore:this.page.bind(this),hasMore:this.state.has_more,loader:r.a.createElement("div",{className:"text-center",key:-1},r.a.createElement(G.a,{animation:"border",variant:"dark"})),getScrollParent:function(){return e.scrollParentRef},threshold:10},a))),t}}]),a}(r.a.Component),ie=Object(v.g)(ce),le=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={authenticated:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.add_auth_listener(Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({authenticated:!0});case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(N.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement("h1",{id:"title-string"},"My Uploads"))),r.a.createElement(S.a,{className:"justify-content-center"},r.a.createElement(C.a,null,r.a.createElement(ie,{feed_path:"/uploads/user"}))))}}]),a}(r.a.Component),ue=Object(v.g)(le),se=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={authenticated:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.add_auth_listener(Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({authenticated:!0});case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(N.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement("h1",{id:"title-string"},"All Uploads"))),r.a.createElement(S.a,{className:"justify-content-center"},r.a.createElement(C.a,null,r.a.createElement(ie,{feed_path:"/uploads",auth_required:!1}))))}}]),a}(r.a.Component),oe=Object(v.g)(se),de=(a(111),a(112),Object(p.a)()),he={"/":{},"/user":{},"/uploads":{}},me=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={authenticated:!1},n.sign_out=n.sign_out.bind(Object(s.a)(n)),n}return Object(u.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){if("authenticated"in t&&t.authenticated!=this.state.authenticated){for(var a=0,n=Object.keys(he);a<n.length;a++){var r=n[a];he[r].authenticated=t.authenticated}return!0}}},{key:"componentDidMount",value:function(){var e=this;O.check_auth(),O.add_auth_listener((function(){e.setState({authenticated:!0})}))}},{key:"sign_out",value:function(){var e=this;O.sign_out().then((function(t){if(!0===t){for(var a=0,n=Object.keys(he);a<n.length;a++){var r=n[a];he[r].authenticated=!1}e.setState({authenticated:!1},(function(){de.replace("/",{authenticated:!1,title_anim:!0,anim_state:2}),window.location.reload()}))}})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){var e=null,t=null,a=null;return this.state.authenticated&&(e=r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{as:f.a,to:"/user"},"My Uploads")),t=r.a.createElement(m.a.Text,{id:"display-name"},"Signed in as ",O.user.name),a=r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{onClick:this.sign_out},"Sign Out"))),r.a.createElement(v.c,{history:de},r.a.createElement(m.a,{bg:"dark",variant:"dark",sticky:"top",expand:"md",animation:"true"},r.a.createElement(m.a.Brand,{as:f.a,to:"/"},"a4-brycecorbitt"),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,null,r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{as:f.a,exact:!0,to:"/"},"Home")),e,r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Link,{as:f.a,to:"/uploads"},"All Uploads")),t,a))),r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/user",render:function(e){return r.a.createElement(ue,Object.assign({},e,{states:he}))}}),r.a.createElement(v.b,{path:"/uploads",render:function(e){return r.a.createElement(oe,Object.assign({},e,{states:he}))}}),r.a.createElement(v.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(R,Object.assign({},e,{states:he}))}})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,a){e.exports=a(113)},84:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.04fee53d.chunk.js.map